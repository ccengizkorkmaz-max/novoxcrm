(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},24687,e=>{"use strict";var a=e.i(43476),t=e.i(75157);function s({className:e,...s}){return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,t.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},52571,e=>{"use strict";let a=(0,e.i(75254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["Info",()=>a],52571)},15531,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(18566),l=e.i(15288),r=e.i(19455),i=e.i(93479),d=e.i(10204),n=e.i(67489),c=e.i(24687),o=e.i(30699),u=e.i(52571),m=e.i(31278),x=e.i(95187);let p=(0,x.createServerReference)("60218af56338dab9eced315a3d59e422565380060a",x.callServer,void 0,x.findSourceMapURL,"updateIncentiveCampaign");var h=e.i(46696);function j({projects:e,campaign:x}){let j=(0,s.useRouter)(),[g,b]=(0,t.useState)(!1);async function v(e){b(!0);let a={project_id:"all"===e.get("project_id")?null:e.get("project_id"),name:e.get("name"),description:e.get("description"),type:e.get("type"),bonus_value:Number(e.get("bonus_value")),target_count:e.get("target_count")?Number(e.get("target_count")):void 0,start_date:e.get("start_date")||null,end_date:e.get("end_date")||null};if(!a.name||!a.bonus_value){h.toast.error("Lütfen zorunlu alanları doldurun."),b(!1);return}let t=await p(x.id,a);t.error?(h.toast.error(t.error),b(!1)):(h.toast.success("Kampanya güncellendi."),j.push("/admin/broker-leads/campaigns"),j.refresh())}return(0,a.jsxs)("div",{className:"max-w-3xl mx-auto pb-12",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Kampanyayı Düzenle"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:[x.name," kampanyasının detaylarını güncelleyin."]})]}),(0,a.jsx)("form",{action:v,children:(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)(l.Card,{children:[(0,a.jsx)(l.CardHeader,{children:(0,a.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(u.Info,{className:"h-5 w-5 text-blue-600"}),"Temel Bilgiler"]})}),(0,a.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"name",children:"Kampanya Adı *"}),(0,a.jsx)(i.Input,{id:"name",name:"name",defaultValue:x.name,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"description",children:"Açıklama / Şartlar"}),(0,a.jsx)(c.Textarea,{id:"description",name:"description",defaultValue:x.description,rows:3})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"project_id",children:"Geçerli Proje"}),(0,a.jsxs)(n.Select,{name:"project_id",defaultValue:x.project_id||"all",children:[(0,a.jsx)(n.SelectTrigger,{children:(0,a.jsx)(n.SelectValue,{placeholder:"Tüm Projeler"})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"all",children:"Tüm Projeler"}),e.map(e=>(0,a.jsx)(n.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"type",children:"Kampanya Türü"}),(0,a.jsxs)(n.Select,{name:"type",defaultValue:x.type,children:[(0,a.jsx)(n.SelectTrigger,{children:(0,a.jsx)(n.SelectValue,{})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"Unit Sales",children:"Satış Adedi"}),(0,a.jsx)(n.SelectItem,{value:"Volume",children:"Satış Hacmi (₺)"}),(0,a.jsx)(n.SelectItem,{value:"Visits",children:"Ziyaret Adedi"}),(0,a.jsx)(n.SelectItem,{value:"Special",children:"Özel Bonus"})]})]})]})]})]})]}),(0,a.jsxs)(l.Card,{children:[(0,a.jsx)(l.CardHeader,{children:(0,a.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(o.Gift,{className:"h-5 w-5 text-green-600"}),"Hedef ve Ödül"]})}),(0,a.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"bonus_value",children:"Bonus Tutarı (₺) *"}),(0,a.jsx)(i.Input,{id:"bonus_value",name:"bonus_value",type:"number",defaultValue:x.bonus_value,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"target_count",children:"Hedef Sayı"}),(0,a.jsx)(i.Input,{id:"target_count",name:"target_count",type:"number",defaultValue:x.target_count})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"start_date",children:"Başlangıç Tarihi"}),(0,a.jsx)(i.Input,{id:"start_date",name:"start_date",type:"date",defaultValue:x.start_date?x.start_date.split("T")[0]:""})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"end_date",children:"Bitiş Tarihi"}),(0,a.jsx)(i.Input,{id:"end_date",name:"end_date",type:"date",defaultValue:x.end_date?x.end_date.split("T")[0]:""})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>j.back(),children:"Vazgeç"}),(0,a.jsx)(r.Button,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 font-bold px-8",disabled:g,children:g?(0,a.jsx)(m.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):"Güncelle"})]})]})})]})}e.s(["default",()=>j],15531)}]);