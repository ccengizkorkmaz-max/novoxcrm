module.exports=[19267,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(66718),f=a.i(24987),g=a.i(52495),h=a.i(14574),i=a.i(70430);function j({address:a,latitude:j,longitude:k}){let[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(a||""),[p,q]=(0,c.useState)(j?.toString()||""),[r,s]=(0,c.useState)(k?.toString()||"");return(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Input,{name:"location_display",defaultValue:a||"",placeholder:"Lokasyon seÃ§ilmedi",className:"flex-1",readOnly:!0}),(0,b.jsx)("input",{type:"hidden",name:"latitude",defaultValue:j||""}),(0,b.jsx)("input",{type:"hidden",name:"longitude",defaultValue:k||""}),(0,b.jsxs)(h.Dialog,{open:l,onOpenChange:m,children:[(0,b.jsx)(h.DialogTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{type:"button",variant:"outline",size:"icon",title:"Lokasyon DÃ¼zenle",children:(0,b.jsx)(f.MapPin,{className:"h-4 w-4"})})}),(0,b.jsxs)(h.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(h.DialogHeader,{children:[(0,b.jsx)(h.DialogTitle,{children:"Lokasyon Bilgisi"}),(0,b.jsx)(h.DialogDescription,{children:"Google Maps'ten koordinatlarÄ± kopyalayÄ±p buraya yapÄ±ÅŸtÄ±rÄ±n."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"temp-address",children:"Adres"}),(0,b.jsx)(e.Input,{id:"temp-address",value:n,onChange:a=>o(a.target.value),placeholder:"Ã–rn: Fatih, Ä°stanbul"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"temp-lat",children:"Enlem (Latitude)"}),(0,b.jsx)(e.Input,{id:"temp-lat",type:"number",step:"any",value:p,onChange:a=>q(a.target.value),placeholder:"41.0082"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"temp-lng",children:"Boylam (Longitude)"}),(0,b.jsx)(e.Input,{id:"temp-lng",type:"number",step:"any",value:r,onChange:a=>s(a.target.value),placeholder:"28.9784"})]})]}),(0,b.jsxs)(d.Button,{type:"button",variant:"outline",className:"w-full",onClick:()=>{let a=n||"Turkey";window.open(`https://www.google.com/maps/search/${encodeURIComponent(a)}`,"_blank")},children:[(0,b.jsx)(g.ExternalLink,{className:"mr-2 h-4 w-4"}),"Google Maps'te AÃ§"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Google Maps'te konumu bulun, koordinatlara saÄŸ tÄ±klayÄ±p kopyalayÄ±n ve yukarÄ±daki alanlara yapÄ±ÅŸtÄ±rÄ±n."})]}),(0,b.jsxs)(h.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Ä°ptal"}),(0,b.jsx)(d.Button,{type:"button",onClick:()=>{let a=document.querySelector('input[name="location_display"]'),b=document.querySelector('input[name="latitude"]'),c=document.querySelector('input[name="longitude"]');a&&(a.value=n),b&&(b.value=p),c&&(c.value=r),m(!1)},children:"Kaydet"})]})]})]}),j&&k&&(0,b.jsx)(d.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{j&&k?window.open(`https://www.google.com/maps?q=${j},${k}`,"_blank"):a&&window.open(`https://www.google.com/maps/search/${encodeURIComponent(a)}`,"_blank")},title:"Google Maps'te GÃ¶ster",children:"Haritada GÃ¶ster"})]})}a.s(["LocationPicker",()=>j])},91342,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(66718),f=a.i(70430),g=a.i(29246),h=a.i(73320),i=a.i(96221),j=a.i(14574);function k({projectId:a,onUpload:k}){let[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null);async function r(b){b.preventDefault(),o(!0);let c=new FormData(b.currentTarget);c.append("project_id",a);try{let a=await k(c);o(!1),a?.success?(alert("DÃ¶kÃ¼man baÅŸarÄ±yla yÃ¼klendi!"),m(!1),q(null),b.target.reset(),window.location.reload()):alert(a?.error||"YÃ¼kleme baÅŸarÄ±sÄ±z. LÃ¼tfen tekrar deneyin.")}catch(a){o(!1),console.error("Upload error:",a),alert("Bir hata oluÅŸtu. LÃ¼tfen konsolu kontrol edin.")}}return(0,b.jsxs)(j.Dialog,{open:l,onOpenChange:m,children:[(0,b.jsx)(j.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{children:[(0,b.jsx)(h.Upload,{className:"mr-2 h-4 w-4"}),"DÃ¶kÃ¼man YÃ¼kle"]})}),(0,b.jsxs)(j.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Yeni DÃ¶kÃ¼man YÃ¼kle"}),(0,b.jsx)(j.DialogDescription,{children:"Projeye ait dÃ¶kÃ¼man yÃ¼kleyin (PDF, resim, Word, Excel vb.)"})]}),(0,b.jsxs)("form",{onSubmit:r,children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"document_name",children:"DÃ¶kÃ¼man AdÄ± *"}),(0,b.jsx)(e.Input,{id:"document_name",name:"document_name",placeholder:"Ã–rn: Ä°mar PlanÄ±",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"description",children:"AÃ§Ä±klama"}),(0,b.jsx)(g.Textarea,{id:"description",name:"description",placeholder:"DÃ¶kÃ¼man hakkÄ±nda kÄ±sa aÃ§Ä±klama",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"file",children:"Dosya *"}),(0,b.jsx)(e.Input,{id:"file",name:"file",type:"file",required:!0,onChange:a=>q(a.target.files?.[0]||null)}),p&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["SeÃ§ili: ",p.name," (",(p.size/1024/1024).toFixed(2)," MB)"]})]})]}),(0,b.jsxs)(j.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>m(!1),disabled:n,children:"Ä°ptal"}),(0,b.jsxs)(d.Button,{type:"submit",disabled:n,children:[n&&(0,b.jsx)(i.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"YÃ¼kle"]})]})]})]})]})}a.s(["DocumentUpload",()=>k])},77115,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(14574),f=a.i(66718),g=a.i(70430),h=a.i(15618),i=a.i(53949),j=a.i(50944);let k=["Daire","Depo","DÃ¼kkan","Ofis","Villa","Dubleks Daire","BahÃ§e Dubleks Daire","Ã‡atÄ± Dubleks Daire","Roof Daire","Loft Daire","Penthouse","Ticari Alan"];function l({projectId:a,action:l}){let[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)([]),u=(0,j.useRouter)();async function v(b){p(!0),r(null),s.length>0&&b.set("room_areas",JSON.stringify(s)),console.log("BatchUnitCreator room_areas (manual):",b.get("room_areas"));let c=await l(b);if(p(!1),c?.error){console.error("Batch Create Error:",c.error),r(c.error);return}n(!1),u.refresh(),u.push(`/projects/${a}?tab=units`)}return(0,b.jsxs)(e.Dialog,{open:m,onOpenChange:n,children:[(0,b.jsx)(e.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4 mr-2"})," Ãœnite Ekle"]})}),(0,b.jsxs)(e.DialogContent,{className:"sm:max-w-[800px]",children:[(0,b.jsxs)(e.DialogHeader,{children:[(0,b.jsx)(e.DialogTitle,{children:"Toplu Ãœnite OluÅŸturma"}),(0,b.jsx)(e.DialogDescription,{children:"Birden fazla Ã¼niteyi hÄ±zlÄ±ca sisteme ekleyin."})]}),(0,b.jsxs)("form",{action:v,children:[(0,b.jsx)("input",{type:"hidden",name:"project_id",value:a}),(0,b.jsxs)("div",{className:"py-4 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Temel Bilgiler"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"unit_category",children:"Ãœnite TÃ¼rÃ¼"}),(0,b.jsxs)("select",{id:"unit_category",name:"unit_category",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[(0,b.jsx)("option",{value:"",children:"SeÃ§iniz..."}),k.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"type",children:"Oda Tipi"}),(0,b.jsxs)("select",{id:"type",name:"type",required:!0,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[(0,b.jsx)("option",{value:"",children:"SeÃ§iniz..."}),(0,b.jsx)("option",{value:"1+1",children:"1+1"}),(0,b.jsx)("option",{value:"2+1",children:"2+1"}),(0,b.jsx)("option",{value:"3+1",children:"3+1"}),(0,b.jsx)("option",{value:"4+1",children:"4+1"}),(0,b.jsx)("option",{value:"Villa",children:"Villa"}),(0,b.jsx)("option",{value:"Commercial",children:"Ticari"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"count",children:"Adet"}),(0,b.jsx)(f.Input,{id:"count",name:"count",type:"number",defaultValue:"10",required:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"area_gross",children:"BrÃ¼t Alan (mÂ²)"}),(0,b.jsx)(f.Input,{id:"area_gross",name:"area_gross",type:"number",step:"0.01",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"price",children:"Liste FiyatÄ±"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Input,{id:"price",name:"price",type:"number",required:!0,className:"flex-1"}),(0,b.jsxs)("select",{name:"currency",className:"w-20 rounded-md border border-input bg-background px-3 py-2 text-sm",defaultValue:"TRY",children:[(0,b.jsx)("option",{value:"TRY",children:"TRY"}),(0,b.jsx)("option",{value:"USD",children:"USD"}),(0,b.jsx)("option",{value:"EUR",children:"EUR"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"max_discount_rate",children:"Max. Ä°skonto (%)"}),(0,b.jsx)(f.Input,{id:"max_discount_rate",name:"max_discount_rate",type:"number",step:"0.1",defaultValue:"0"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"block",children:"Blok"}),(0,b.jsx)(f.Input,{id:"block",name:"block",defaultValue:"A",placeholder:"Ã–rn: A"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"start_number",children:"BaÅŸlangÄ±Ã§ NumarasÄ±"}),(0,b.jsx)(f.Input,{id:"start_number",name:"start_number",type:"number",defaultValue:"1"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider border-t pt-4",children:"Ãœnite Ã–zellikleri"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"parking_type",children:"Otopark"}),(0,b.jsxs)("select",{id:"parking_type",name:"parking_type",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm border-s-muted-foreground/20",children:[(0,b.jsx)("option",{value:"",children:"SeÃ§iniz..."}),(0,b.jsx)("option",{value:"KapalÄ± Otopark",children:"ðŸ…¿ï¸ Var, KapalÄ±"}),(0,b.jsx)("option",{value:"AÃ§Ä±k Otopark",children:"ðŸ…¿ï¸ Var, AÃ§Ä±k"}),(0,b.jsx)("option",{value:"Yok",children:"âŒ Yok"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"heating_type",children:"IsÄ±tma"}),(0,b.jsxs)("select",{id:"heating_type",name:"heating_type",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm border-s-muted-foreground/20",children:[(0,b.jsx)("option",{value:"",children:"SeÃ§iniz..."}),(0,b.jsx)("option",{value:"Kombi",children:"ðŸ”¥ Kombi"}),(0,b.jsx)("option",{value:"Kombi Yerden IsÄ±tma",children:"ðŸ”¥ Kombi Yerden"}),(0,b.jsx)("option",{value:"Merkezi Sistem",children:"ðŸ¢ Merkezi"}),(0,b.jsx)("option",{value:"Merkezi Sistem Yerden IsÄ±tma",children:"ðŸ¢ Merkezi Yerden"}),(0,b.jsx)("option",{value:"Klima",children:"â„ï¸ Klima"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"direction",children:"Cephe"}),(0,b.jsxs)("select",{id:"direction",name:"direction",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm border-s-muted-foreground/20",children:[(0,b.jsx)("option",{value:"",children:"SeÃ§iniz..."}),(0,b.jsx)("option",{value:"Kuzey",children:"â¬†ï¸ Kuzey"}),(0,b.jsx)("option",{value:"GÃ¼ney",children:"â¬‡ï¸ GÃ¼ney"}),(0,b.jsx)("option",{value:"DoÄŸu",children:"âž¡ï¸ DoÄŸu"}),(0,b.jsx)("option",{value:"BatÄ±",children:"â¬…ï¸ BatÄ±"}),(0,b.jsx)("option",{value:"Kuzey BatÄ±",children:"â†–ï¸ Kuzey BatÄ±"}),(0,b.jsx)("option",{value:"Kuzey DoÄŸu",children:"â†—ï¸ Kuzey DoÄŸu"}),(0,b.jsx)("option",{value:"GÃ¼ney DoÄŸu",children:"â†˜ï¸ GÃ¼ney DoÄŸu"}),(0,b.jsx)("option",{value:"GÃ¼ney BatÄ±",children:"â†™ï¸ GÃ¼ney BatÄ±"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"kitchen_type",children:"Mutfak Tipi"}),(0,b.jsxs)("select",{id:"kitchen_type",name:"kitchen_type",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm border-s-muted-foreground/20",children:[(0,b.jsx)("option",{value:"",children:"SeÃ§iniz..."}),(0,b.jsx)("option",{value:"KapalÄ± Mutfak",children:"ðŸšª KapalÄ±"}),(0,b.jsx)("option",{value:"AÃ§Ä±k Mutfak",children:"ðŸ³ AÃ§Ä±k"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"has_builtin_kitchen",children:"Ankastre Mutfak"}),(0,b.jsxs)("select",{id:"has_builtin_kitchen",name:"has_builtin_kitchen",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm border-s-muted-foreground/20",children:[(0,b.jsx)("option",{value:"false",children:"âŒ Yok"}),(0,b.jsx)("option",{value:"true",children:"âœ… Var"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"has_master_bathroom",children:"Ebeveyn Banyosu"}),(0,b.jsxs)("select",{id:"has_master_bathroom",name:"has_master_bathroom",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm border-s-muted-foreground/20",children:[(0,b.jsx)("option",{value:"false",children:"âŒ Yok"}),(0,b.jsx)("option",{value:"true",children:"âœ… Var"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider border-t pt-4",children:"Oda DaÄŸÄ±lÄ±mÄ±"}),(0,b.jsx)(i.RoomAreasInput,{onValueChange:t})]})]}),(0,b.jsxs)(e.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Ä°ptal"}),(0,b.jsx)(d.Button,{type:"submit",disabled:o,children:o?"OluÅŸturuluyor...":"Ãœniteleri OluÅŸtur"})]})]})]})]})}a.s(["BatchUnitCreator",()=>l])},77749,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(66718),f=a.i(70430),g=a.i(96221),h=a.i(24722),i=a.i(14574);function j({projectId:a,onImport:j}){let[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null);async function q(b){b.preventDefault(),n(!0);let c=new FormData(b.currentTarget);c.append("project_id",a);try{let a=await j(c);n(!1),a?.success?(alert(`${a.count||0} \xfcnite baÅŸarÄ±yla i\xe7e aktarÄ±ldÄ±!`),l(!1),p(null),b.target.reset(),window.location.reload()):alert(a?.error||"Ä°Ã§e aktarma baÅŸarÄ±sÄ±z. LÃ¼tfen dosya formatÄ±nÄ± kontrol edin.")}catch(a){n(!1),console.error("Import error:",a),alert("Bir hata oluÅŸtu. LÃ¼tfen konsolu kontrol edin.")}}return(0,b.jsxs)(i.Dialog,{open:k,onOpenChange:l,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"outline",size:"icon",title:"Excel'den Ä°Ã§e Aktar",children:(0,b.jsx)(h.FileSpreadsheet,{className:"h-4 w-4"})})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[600px]",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Excel'den Ãœnite Ä°Ã§e Aktar"}),(0,b.jsxs)(i.DialogDescription,{children:["Excel dosyasÄ±ndan toplu Ã¼nite yÃ¼kleyin. Dosya ÅŸu kolonlarÄ± iÃ§ermelidir:",(0,b.jsx)("br",{}),(0,b.jsx)("code",{className:"text-xs bg-muted px-1 py-0.5 rounded block mt-2 w-fit",children:"unit_number, type, status, price, area_gross, floor, block"})]})]}),(0,b.jsxs)("form",{onSubmit:q,children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.Label,{htmlFor:"file",children:"Excel DosyasÄ± (.xlsx, .csv)"}),(0,b.jsx)(e.Input,{id:"file",name:"file",type:"file",accept:".xlsx,.xls,.csv",required:!0,className:"cursor-pointer",onChange:a=>p(a.target.files?.[0]||null)}),o&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["SeÃ§ili: ",o.name]})]}),(0,b.jsxs)("div",{className:"p-3 bg-muted rounded-lg text-xs overflow-x-auto",children:[(0,b.jsx)("p",{className:"font-semibold mb-1",children:"Ã–rnek Format:"}),(0,b.jsxs)("pre",{className:"text-xs whitespace-pre",children:["unit_number | type | status    | price  | area_gross | floor | block","\n","A-101       | 2+1  | For Sale  | 500000 | 120        | 1     | A","\n","A-102       | 3+1  | For Sale  | 750000 | 150        | 1     | A"]})]})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:m,children:"Ä°ptal"}),(0,b.jsxs)(d.Button,{type:"submit",disabled:m,children:[m&&(0,b.jsx)(g.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Ä°Ã§e Aktar"]})]})]})]})]})}a.s(["ExcelImport",()=>j])},61118,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(99570),f=a.i(66718),g=a.i(70430),h=a.i(6015),i=a.i(73390),j=a.i(15618),k=a.i(81560);let l=(0,a.i(70106).default)("hard-hat",[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]]);var m=a.i(23292);function n({projectId:a,stages:n,units:o,unitProgress:p,onAddStage:q,onUpdateStage:r,onDeleteStage:s,onUpdateUnitProgress:t}){let[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(0),[y,z]=(0,c.useState)(!1),A=async()=>{if(!u)return;let b=await q(a,u,w);b.success?(v(""),x(0),m.toast.success("AÅŸama eklendi")):m.toast.error(b.error)},B=()=>{if(0===n.length)return 0;let a=n.reduce((a,b)=>a+Number(b.weight),0);if(0===a)return 0;let b=0;return n.forEach(c=>{let d=p.filter(a=>a.stage_id===c.id);if(d.length>0){let e=d.reduce((a,b)=>a+Number(b.completion_percentage),0)/o.length;b+=e*Number(c.weight)/a}}),Math.round(b)};return(0,b.jsxs)("div",{className:"grid gap-6",children:[(0,b.jsxs)(d.Card,{className:"bg-primary/5 border-primary/20",children:[(0,b.jsxs)(d.CardHeader,{className:"pb-2",children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(l,{className:"w-5 h-5 text-primary"}),"Genel Ä°nÅŸaat Ä°lerlemesi"]}),(0,b.jsx)(d.CardDescription,{children:"TÃ¼m Ã¼nitelerin ve aÅŸamalarÄ±n aÄŸÄ±rlÄ±klÄ± ortalamasÄ±."})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end mb-1",children:[(0,b.jsxs)("span",{className:"text-3xl font-bold",children:[B(),"%"]}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Hedef: %100"})]}),(0,b.jsx)(i.Progress,{value:B(),className:"h-3"})]})})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,b.jsxs)(d.Card,{className:"md:col-span-1",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Ä°nÅŸaat AÅŸamalarÄ±"}),(0,b.jsx)(d.CardDescription,{children:"Proje geneli ana iÅŸ kalemleri."})]}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsx)("div",{className:"space-y-2",children:n.map(c=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:c.name}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["AÄŸÄ±rlÄ±k: %",c.weight]})]}),(0,b.jsx)(e.Button,{size:"icon",variant:"ghost",onClick:()=>s(c.id,a),children:(0,b.jsx)(k.Trash2,{className:"w-4 h-4 text-destructive"})})]},c.id))}),(0,b.jsxs)("div",{className:"pt-4 border-t space-y-3",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{children:"Yeni AÅŸama AdÄ±"}),(0,b.jsx)(f.Input,{placeholder:"Ã–rn: Kaba Ä°nÅŸaat",value:u,onChange:a=>v(a.target.value)})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(g.Label,{children:"AÄŸÄ±rlÄ±k (%)"}),(0,b.jsx)(f.Input,{type:"number",value:w,onChange:a=>x(Number(a.target.value))})]}),(0,b.jsxs)(e.Button,{className:"w-full",onClick:A,children:[(0,b.jsx)(j.Plus,{className:"w-4 h-4 mr-2"})," Ekle"]})]})]})]}),(0,b.jsxs)(d.Card,{className:"md:col-span-2",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Ãœnite BazlÄ± Ä°lerleme GiriÅŸi"}),(0,b.jsx)(d.CardDescription,{children:"Her dairenin aÅŸama bazlÄ± gerÃ§ekleÅŸme yÃ¼zdesi."})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"max-h-[600px] overflow-auto border rounded-md",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Ãœnite"}),n.map(a=>(0,b.jsx)(h.TableHead,{className:"text-center min-w-[100px]",children:a.name},a.id))]})}),(0,b.jsx)(h.TableBody,{children:o.map(c=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsxs)(h.TableCell,{className:"font-medium whitespace-nowrap",children:[c.block,"-",c.unit_number]}),n.map(d=>{let e=p.find(a=>a.unit_id===c.id&&a.stage_id===d.id);return(0,b.jsx)(h.TableCell,{className:"p-2",children:(0,b.jsx)(f.Input,{type:"number",className:"h-8 text-center text-xs",defaultValue:e?.completion_percentage||0,onBlur:async b=>{let f=Number(b.target.value);f!==(e?.completion_percentage||0)&&await t(c.id,d.id,f,a)}})},d.id)})]},c.id))})]})})})]})]})]})}a.s(["ConstructionProgress",()=>n],61118)}];

//# sourceMappingURL=src_components_bb8abc4e._.js.map